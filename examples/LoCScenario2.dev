Metadata
    name: "Scenario2"
    description: "My RaspberryPi 5 with increasing number of peripherals"
    author: "maria"
    os: Raspbian
end

Components
    board: RaspberryPi_5_8GB
    peripherals:
        - VL53L1X(MyToF)
        /*- TCRT5000(MyTracker)
        - TFMini(MyTFMini)
        - BME680(MyBME)
        - SRF05(MySRF)
        - ADCDifferentialPi(MyADC)
        - WS2812(MyLedRing)
        - PCA9685(MyServoController)*/
end

Network
    ssid: "Wifi_2.4GHz"
    passwd: "guest"
end

Broker<MQTT> locsys_broker
    host: "locsys.issel.ee.auth.gr"
    port: 1883
    ssl: False
    auth:
        username: "sensors"
        password: "issel.sensors"
end

Connection
    peripheral: MyToF
    powerConnections:
        - GND_3 -- GND
        - power_5v_a -- VIN
    ioConnections:
        - type: i2c
          name: data
          slave_address: 0x29
          pins:
            sda: GPIO2 -- SDA
            scl: GPIO3 -- SCL
    endpoint:
        type: Publisher 
end
/*
Connection
    peripheral: MyTracker
    powerConnections:
        - GND_1 -- GND
        - power_5v_a -- VCC
    ioConnections:
        - type: gpio
          name: digitalIN
          pin:
              GPIO4 -- D0
    endpoint:
        type: Publisher
end

Connection
    peripheral: MyTFMini
    powerConnections:
        - GND_4 -- GND
        - power_5v_b -- VCC
    ioConnections:
        - type: uart
          name: data
          pins:
            tx: GPIO15 -- TXD //Here i assigned to tx the sensor's tx
            rx: GPIO14 -- RXD //Respectively
            baudrate: 115200
    endpoint:
        type: Publisher 
end

Connection
    peripheral: MyBME
    powerConnections:
        - GND_3 -- GND
        - power_5v_a -- VCC
    ioConnections:
        - type: i2c
          name: env_data
          slave_address: 0x76
          pins:
            sda: GPIO2 -- sda
            scl: GPIO3 -- scl
    endpoint:
        type: Publisher 
end

Connection
    peripheral: MySRF
    powerConnections:
        - GND_2 -- GND
        - power_5v_b -- VCC
    ioConnections:
        - type: gpio
          name: echo
          pin:
              GPIO24 -- echo
        - type: gpio
          name: trigger
          pin:
              GPIO23 -- trigger
    endpoint:
        type: Publisher
end 

Connection
    peripheral: MyADC
    powerConnections:
        - GND_3 -- GND
        - power_5v_a -- VCC
    ioConnections:
        - type: i2c
          name: adc_data
          slave_address: 0x68
          pins:
            sda: GPIO2 -- SDA
            scl: GPIO3 -- SCL
    endpoint:
        type: Publisher 
    settings:
        - resolution: int = 18
        - gain: int = 1
        - channel: int = 8
end

Connection
    peripheral: MyLedRing
    powerConnections:
        - GND_4 -- GND
        - power_5v_b -- VCC
    ioConnections:
        - type: gpio
          name: LedControl
          pin: GPIO10 -- DIN
    endpoint:
        type: Subscriber
    settings:
        - colors: list = ['0xFF0000', '0x00FF00', '0x0000FF', '0xFFFF00', '0xFF00FF', '0x00FFFF', '0xFFFFFF', '0x800000', '0x008000', '0x000080', '0xFFA500', '0x800080']
end

Connection
    peripheral: MyServoController
    powerConnections:
        - GND_1 -- GND_1
        - power_5v_a -- VCC_1
    ioConnections:
        - type: i2c
          name: pca_control
          slave_address: 0x64
          pins:
            sda: GPIO2 -- SDA_1
            scl: GPIO3 -- SCL_1
    endpoint:
        type: Subscriber
    settings:
        - channel : int = 2
        - initial_angle : float = 90.0
        - final_angle : float = 180.0
        - angular_speed : float = 10.0
end
*/